# Complete Workflow Guide - Quadratic Equations

## Overview

Students can now use the MathLive keyboard in **BOTH** the work area and final answer fields!

---

## The Complete Student Workflow

### Question: Solve x² - 5x + 6 = 0

```
┌──────────────────────────────────────────────┐
│ Question 1: Solve x² - 5x + 6 = 0            │
├──────────────────────────────────────────────┤
│                                              │
│ Show Your Working (Optional):                │
│ Use the keyboard icon to enter math formulas │
│ ┌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┐ [⌨️]  │
│ │ ← Click here to type or click ⌨️ for   │    │
│ │    math keyboard                       │    │
│ └╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┘      │
│                                              │
│ Final Answer: (Use ⌨️ icons to open math    │
│                keyboard)                     │
│                                              │
│ x₁ = ┌────┐ [⌨️]    x₂ = ┌────┐ [⌨️]         │
│      │    │              │    │             │
│      └────┘              └────┘             │
│                                              │
│ [🔮 Calculate Result]  [✓ Check Answer]     │
└──────────────────────────────────────────────┘
```

---

## Step-by-Step: Your Scenario

### Step 1: Click Work Area's Keyboard Icon ⌨️

**Action:** Click the keyboard icon next to the work area

**Result:**
- Virtual keyboard appears at bottom of screen
- Work area field gets focus
- Keyboard icon turns blue (active)

```
┌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┐ [⌨️] ← Active
│ ← Cursor is here              │
└╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┘

┌────────────────────────────────┐
│  Virtual Keyboard Appears Here │
│  [KS3/KS4] [Algebra] [Quadratic]
│  [x = (-b±√...] [ax²+bx+c=0]   │
└────────────────────────────────┘
```

### Step 2: Select Quadratic Formula from Keyboard

**Action:** Click "Quadratic" tab, then click the formula button

**Result:**
- Formula inserted: `x = \frac{-b \pm \sqrt{b^{2}-4ac}}{2a}`
- Appears in work area as rendered LaTeX

```
┌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┐ [⌨️]
│ x = (-b ± √(b²-4ac))/2a       │ ← Formula appears
└╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┘
```

### Step 3: Populate Formula with Values

**Action:** Continue using keyboard to add values

**You type/click:**
- New line
- `a = 1, b = -5, c = 6`
- New line
- `x = (5 ± √1) / 2`

**Result:**
```
┌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┐ [⌨️]
│ x = (-b ± √(b²-4ac))/2a       │
│                                │
│ a = 1, b = -5, c = 6          │
│                                │
│ x = (5 ± √1) / 2              │
│                                │
│ x₁ = 3, x₂ = 2                │
└╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┘
```

### Step 4: Click Calculate Result (Optional)

**Action:** Click "🔮 Calculate Result" button

**Result:**
- Purple box appears
- Shows: "x₁ = 3.000, x₂ = 2.000"
- Shows: "Two real roots (discriminant = 1.00)"

```
┌────────────────────────────────┐
│ 💡 Calculated Result:          │
│ x₁ = 3.000, x₂ = 2.000         │
│ Two real roots (discriminant=1)│
└────────────────────────────────┘
```

### Step 5: Enter x₁

**Action:** Click x₁ field or its keyboard icon

**Result:**
- x₁ field gets focus
- Virtual keyboard still open (or click ⌨️ to reopen)

**You enter:** `3`

```
x₁ = ┌────┐ [⌨️]    x₂ = ┌────┐ [⌨️]
     │ 3  │              │    │
     └────┘              └────┘
```

### Step 6: Enter x₂

**Action:** Click x₂ field or its keyboard icon

**You enter:** `2`

```
x₁ = ┌────┐ [⌨️]    x₂ = ┌────┐ [⌨️]
     │ 3  │              │ 2  │
     └────┘              └────┘
```

### Step 7: Check Answer

**Action:** Click "✓ Check Answer" button

**Result:**
- Both x₁ and x₂ fields turn GREEN ✅
- Green feedback box appears
- Status badge: "Correct"
- Progress updates: "1/5 answered (1 correct)"

```
✅ Excellent! Your answer is correct.

x₁ = ┌────┐        x₂ = ┌────┐
     │ 3  │              │ 2  │
     └────┘              └────┘
   ↑ Green              ↑ Green
```

---

## Key Features

### 1. Work Area Now Has Math Keyboard

**Before:** Plain textarea (no math symbols)
**After:** MathLive field with full math keyboard support

**Benefits:**
✅ Can insert quadratic formula
✅ Can use proper math notation
✅ Can show working with fractions, powers, roots
✅ Professional mathematical presentation

### 2. Three Keyboard Icons

**Icon 1:** Next to work area
- Opens keyboard for work area
- Focus stays on work area
- Can insert formulas and show working

**Icon 2:** Next to x₁ field
- Opens keyboard for x₁
- Focus moves to x₁
- Enter first root

**Icon 3:** Next to x₂ field
- Opens keyboard for x₂
- Focus moves to x₂
- Enter second root

### 3. Keyboard Stays Open

**Important:** The virtual keyboard stays open until you click the active keyboard icon again!

**Workflow:**
1. Click work area ⌨️ → Keyboard opens
2. Enter formula and working
3. Click x₁ field → Focus moves, keyboard stays open
4. Enter x₁ value
5. Click x₂ field → Focus moves, keyboard stays open
6. Enter x₂ value
7. Click ⌨️ to close keyboard

---

## Visual Layout

```
┌────────────────────────────────────────────────┐
│ Question 1                        [UNANSWERED] │
├────────────────────────────────────────────────┤
│ Solve: x² - 5x + 6 = 0                         │
│                                                │
│ ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓  │
│ ┃ WORK AREA (MathLive Field)               ┃  │
│ ┃                                          ┃  │
│ ┃ Show Your Working (Optional):            ┃  │
│ ┃ Use the keyboard icon →                  ┃  │
│ ┃                                          ┃  │
│ ┃ ┌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┐ [⌨️]     ┃  │
│ ┃ │                             │ ← Icon 1 ┃  │
│ ┃ │ x = (-b±√(b²-4ac))/2a       │          ┃  │
│ ┃ │ a=1, b=-5, c=6              │          ┃  │
│ ┃ │ x=(5±√1)/2                  │          ┃  │
│ ┃ │ x₁=3, x₂=2                  │          ┃  │
│ ┃ └╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┘          ┃  │
│ ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛  │
│                                                │
│ ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓  │
│ ┃ FINAL ANSWER (Dual MathLive Fields)     ┃  │
│ ┃                                          ┃  │
│ ┃ Final Answer: (Use ⌨️ icons...)         ┃  │
│ ┃                                          ┃  │
│ ┃ x₁= ┌──┐ [⌨️]   x₂= ┌──┐ [⌨️]           ┃  │
│ ┃     │3 │  ← Icon 2   │2 │  ← Icon 3    ┃  │
│ ┃     └──┘             └──┘               ┃  │
│ ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛  │
│                                                │
│ [🔮 Calculate Result]  [✓ Check Answer]       │
│                                                │
│ ┌────────────────────────────────────────┐    │
│ │ 💡 Calculated Result:                  │    │
│ │ x₁ = 3.000, x₂ = 2.000                 │    │
│ └────────────────────────────────────────┘    │
│                                                │
│ ┌────────────────────────────────────────┐    │
│ │ ✅ Excellent! Your answer is correct.  │    │
│ └────────────────────────────────────────┘    │
└────────────────────────────────────────────────┘

┌──────────────────────────────────────────────┐
│ VIRTUAL KEYBOARD (At bottom of screen)      │
│ [KS3/KS4] [Algebra] [Quadratic] [Calculus]  │
│ [x = (-b±√...)] [ax²+bx+c=0] [a=] [b=] [c=] │
│ [x₁=] [x₂=] [±] [√]                          │
│ [7] [8] [9] [×] [÷]                          │
└──────────────────────────────────────────────┘
```

---

## Implementation Details

### Work Area Changed From Textarea to MathLive

**Before:**
```javascript
const workArea = document.createElement('textarea');
```

**After:**
```javascript
const workArea = document.createElement('math-field');
workArea.setAttribute('virtual-keyboard-mode', 'manual');
```

### Added Keyboard Toggle for Work Area

**New:**
```javascript
const workAreaToggle = this.createKeyboardToggle(workArea, questionIndex, true);
// true parameter = this is for work area
```

### CSS Styling

```css
.work-area-mathfield {
    min-height: 120px;
    border: 2px dashed #d1d5db !important;
    background: #f9fafb !important;
}

.work-area-mathfield:focus-within {
    border-style: solid !important;
    background: white !important;
}
```

---

## Benefits

✅ **Professional working:** Use actual mathematical notation
✅ **Quadratic formula:** One click to insert
✅ **Consistent interface:** All fields use same keyboard
✅ **Better learning:** See formulas rendered properly
✅ **Flexible:** Can still type plain text if preferred
✅ **Complete workflow:** Work → Calculate → Answer → Check

---

## Comparison

### Old Workflow (Plain Text Work Area)
```
1. Type: a=1, b=-5, c=6
2. Type: discriminant = b^2 - 4ac = 25 - 24 = 1
3. Type: x = (5 +/- 1) / 2
4. Manual calculation
5. Enter final answer: 2, 3
6. Check
```

### New Workflow (MathLive Work Area)
```
1. Click work area ⌨️
2. Click "Quadratic Formula" button → x = (-b±√(b²-4ac))/2a
3. Type values: a=1, b=-5, c=6
4. Click "Calculate Result" → See x₁=3, x₂=2
5. Click x₁ field, enter 3
6. Click x₂ field, enter 2
7. Check → Both turn green ✅
```

---

## Success Criteria

✅ Work area has keyboard icon
✅ Clicking work area ⌨️ opens keyboard
✅ Can insert quadratic formula
✅ Can show working with proper math notation
✅ Can click Calculate to verify
✅ Can enter x₁ and x₂ separately
✅ Both fields turn green when correct
✅ Complete professional workflow!

---

**Your exact scenario is now fully supported!** 🎓✨
